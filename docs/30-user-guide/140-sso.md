
# SSO session.

Up to now, we have been prompted with a login dialog each time we issued a `kc token ....` command.

On the Kubauth login page, there is a checkbox `Remember me`.

![login](../assets/kubauth-login2.png){ .center width="50%" }

If checked, a session cookie is set, the subsequent login attempt will go through using same user.

You can easily check this by launching several `kc token ....`.

The session cookie is related only to the login page. It is independant of the client application.
This means you have a cross-application Single Sign On.

### logout

What if you want now to login with another user credential ? 

Obviously, you must first logout. This can be achieved with another `kc` subcommand:

``` { .shell .copy }
kc logout --issuerURL https://kubauth.ingress.kubo6.mbp 
```
```shell
No OIDC configuration found in kubeconfig
Opening browser to logout endpoint: https://kubauth.ingress.kubo6.mbp/oauth2/logout
```

Don't care about the first message, related to kubeconfig. This will be explained later, in Kubernetes integration

As prompted, a browser should pop-up to call a specif cleanup URL.

![logout](../assets/kubauth-logout1.png){ .center width="80%" }

## Sessions storage

Session are persisted as Kubernetes resources:

``` { .bash .copy }
kubectl -n kubauth-sso get ssosessions
```
```bash
NAME                                                                 LOGIN   NAME       DEADLINE               AGE
h-6d4d8f33c407a727857ba335d257a04d6d0116c40fa81c26903bb9469139563c   john    John DOE   2025-10-28T00:19:44Z   34s
h-d13bc676b003a200aca5051558b2cd21eccb44f557bee058df00aa3eb6d2bd22   jim                2025-10-28T00:19:13Z   65s
```

Manually deleting such entry is another method to end the session.

## Configuration

SSO configuration be modified by setting a helm chart configuration value:

???+ abstract "values.yaml"

    ``` { .yaml .copy }
    oidc:
      issuer: https://kubauth.ingress.kubo6.mbp
      postLogoutURL: https://kubauth.ingress.kubo6.mbp/index
      ...
      sso:
        namespace: kubauth-sso
        createNamespace: true
        lifeTime: "8h"
        sticky: true
    ```

- `namespace` will allow to change the namespace where SSO sessions are persisted. And allow its creation at Kubauth deployment.
- `lifetime` set the session duration. This is an absolute duration. There is no idle timeout.
- `sticky` true means session cookie is permanent. If false, the session will be lost on browser close.
